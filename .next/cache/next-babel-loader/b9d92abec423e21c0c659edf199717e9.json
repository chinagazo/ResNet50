{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));\n\nvar _mitt = _interopRequireDefault(require(\"next-server/dist/lib/mitt\"));\n/* global document, window */\n\n\nfunction supportsPreload(el) {\n  try {\n    return el.relList.supports('preload');\n  } catch (_unused) {\n    return false;\n  }\n}\n\nconst hasPreload = supportsPreload(document.createElement('link'));\n\nfunction preloadScript(url) {\n  const link = document.createElement('link');\n  link.rel = 'preload';\n  link.crossOrigin = process.crossOrigin;\n  link.href = url;\n  link.as = 'script';\n  document.head.appendChild(link);\n}\n\nclass PageLoader {\n  constructor(buildId, assetPrefix) {\n    this.buildId = buildId;\n    this.assetPrefix = assetPrefix;\n    this.pageCache = {};\n    this.pageRegisterEvents = (0, _mitt.default)();\n    this.loadingRoutes = {};\n    this.promisedBuildId = _promise.default.resolve();\n\n    if (process.env.__NEXT_GRANULAR_CHUNKS) {\n      this.promisedBuildManifest = new _promise.default(resolve => {\n        if (window.__BUILD_MANIFEST) {\n          resolve(window.__BUILD_MANIFEST);\n        } else {\n          window.__BUILD_MANIFEST_CB = () => {\n            resolve(window.__BUILD_MANIFEST);\n          };\n        }\n      });\n    }\n\n    if (process.env.__NEXT_EXPERIMENTAL_SELECTIVEPAGEBUILDING) {\n      this.promisedBuildId = _promise.default.resolve();\n\n      this.onDynamicBuildId = () => {\n        this.promisedBuildId = new _promise.default(resolve => {\n          const unfetch = require('unfetch');\n\n          unfetch(this.assetPrefix + \"/_next/static/HEAD_BUILD_ID\").then(res => {\n            if (res.ok) {\n              return res;\n            }\n\n            const err = new Error('Failed to fetch HEAD buildId');\n            err.res = res;\n            throw err;\n          }).then(res => res.text()).then(buildId => {\n            this.buildId = buildId.trim();\n          }).catch(() => {\n            // When this fails it's not a _huge_ deal, preload wont work and page\n            // navigation will 404, triggering a SSR refresh\n            console.warn('Failed to load BUILD_ID from server. ' + 'The following client-side page transition will likely 404 and cause a SSR.\\n' + 'http://err.sh/zeit/next.js/head-build-id');\n          }).then(resolve, resolve);\n        });\n      };\n    }\n  } // Returns a promise for the dependencies for a particular route\n\n\n  getDependencies(route) {\n    return this.promisedBuildManifest.then(man => man[route] && man[route].map(url => \"/_next/\" + url) || []);\n  }\n\n  normalizeRoute(route) {\n    if (route[0] !== '/') {\n      throw new Error(\"Route name should start with a \\\"/\\\", got \\\"\" + route + \"\\\"\");\n    }\n\n    route = route.replace(/\\/index$/, '/');\n    if (route === '/') return route;\n    return route.replace(/\\/$/, '');\n  }\n\n  loadPage(route) {\n    route = this.normalizeRoute(route);\n    return new _promise.default((resolve, reject) => {\n      const fire = _ref => {\n        let {\n          error,\n          page\n        } = _ref;\n        this.pageRegisterEvents.off(route, fire);\n        delete this.loadingRoutes[route];\n\n        if (error) {\n          reject(error);\n        } else {\n          resolve(page);\n        }\n      }; // If there's a cached version of the page, let's use it.\n\n\n      const cachedPage = this.pageCache[route];\n\n      if (cachedPage) {\n        const {\n          error,\n          page\n        } = cachedPage;\n        error ? reject(error) : resolve(page);\n        return;\n      } // Register a listener to get the page\n\n\n      this.pageRegisterEvents.on(route, fire); // If the page is loading via SSR, we need to wait for it\n      // rather downloading it again.\n\n      if (document.querySelector(\"script[data-next-page=\\\"\" + route + \"\\\"]\")) {\n        return;\n      }\n\n      if (!this.loadingRoutes[route]) {\n        if (process.env.__NEXT_GRANULAR_CHUNKS) {\n          this.getDependencies(route).then(deps => {\n            deps.forEach(d => {\n              if (!document.querySelector(\"script[src^=\\\"\" + d + \"\\\"]\")) {\n                this.loadScript(d, route, false);\n              }\n            });\n            this.loadRoute(route);\n            this.loadingRoutes[route] = true;\n          });\n        } else {\n          this.loadRoute(route);\n          this.loadingRoutes[route] = true;\n        }\n      }\n    });\n  }\n\n  loadRoute(route) {\n    var _this = this;\n\n    return (0, _asyncToGenerator2.default)(function* () {\n      if (process.env.__NEXT_EXPERIMENTAL_SELECTIVEPAGEBUILDING) {\n        yield _this.promisedBuildId;\n      }\n\n      route = _this.normalizeRoute(route);\n      let scriptRoute = route === '/' ? '/index.js' : route + \".js\";\n      const url = _this.assetPrefix + \"/_next/static/\" + encodeURIComponent(_this.buildId) + \"/pages\" + scriptRoute;\n\n      _this.loadScript(url, route, true);\n    })();\n  }\n\n  loadScript(url, route, isPage) {\n    const script = document.createElement('script');\n\n    if (process.env.__NEXT_MODERN_BUILD && 'noModule' in script) {\n      script.type = 'module'; // Only page bundle scripts need to have .module added to url,\n      // dependencies already have it added during build manifest creation\n\n      if (isPage) url = url.replace(/\\.js$/, '.module.js');\n    }\n\n    script.crossOrigin = process.crossOrigin;\n    script.src = url;\n\n    script.onerror = () => {\n      const error = new Error(\"Error loading script \" + url);\n      error.code = 'PAGE_LOAD_ERROR';\n      this.pageRegisterEvents.emit(route, {\n        error\n      });\n    };\n\n    document.body.appendChild(script);\n  } // This method if called by the route code.\n\n\n  registerPage(route, regFn) {\n    const register = () => {\n      try {\n        const {\n          error,\n          page\n        } = regFn();\n        this.pageCache[route] = {\n          error,\n          page\n        };\n        this.pageRegisterEvents.emit(route, {\n          error,\n          page\n        });\n      } catch (error) {\n        this.pageCache[route] = {\n          error\n        };\n        this.pageRegisterEvents.emit(route, {\n          error\n        });\n      }\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      // Wait for webpack to become idle if it's not.\n      // More info: https://github.com/zeit/next.js/pull/1511\n      if (module.hot && module.hot.status() !== 'idle') {\n        console.log(\"Waiting for webpack to become \\\"idle\\\" to initialize the page: \\\"\" + route + \"\\\"\");\n\n        const check = status => {\n          if (status === 'idle') {\n            module.hot.removeStatusHandler(check);\n            register();\n          }\n        };\n\n        module.hot.status(check);\n        return;\n      }\n    }\n\n    register();\n  }\n\n  prefetch(route, isDependency) {\n    var _this2 = this;\n\n    return (0, _asyncToGenerator2.default)(function* () {\n      if (process.env.__NEXT_EXPERIMENTAL_SELECTIVEPAGEBUILDING) {\n        yield _this2.promisedBuildId;\n      }\n\n      route = _this2.normalizeRoute(route);\n      let scriptRoute = (route === '/' ? '/index' : route) + \".js\";\n\n      if (process.env.__NEXT_MODERN_BUILD && 'noModule' in document.createElement('script')) {\n        scriptRoute = scriptRoute.replace(/\\.js$/, '.module.js');\n      }\n\n      const url = isDependency ? route : _this2.assetPrefix + \"/_next/static/\" + encodeURIComponent(_this2.buildId) + \"/pages\" + scriptRoute; // n.b. If preload is not supported, we fall back to `loadPage` which has\n      // its own deduping mechanism.\n\n      if (document.querySelector(\"link[rel=\\\"preload\\\"][href^=\\\"\" + url + \"\\\"], script[data-next-page=\\\"\" + route + \"\\\"]\")) {\n        return;\n      } // Inspired by quicklink, license: https://github.com/GoogleChromeLabs/quicklink/blob/master/LICENSE\n\n\n      let cn;\n\n      if (cn = navigator.connection) {\n        // Don't prefetch if the user is on 2G or if Save-Data is enabled.\n        if ((cn.effectiveType || '').indexOf('2g') !== -1 || cn.saveData) {\n          return;\n        }\n      }\n\n      if (process.env.__NEXT_GRANULAR_CHUNKS && !isDependency) {\n        ;\n        (yield _this2.getDependencies(route)).forEach(url => {\n          _this2.prefetch(url, true);\n        });\n      } // Feature detection is used to see if preload is supported\n      // If not fall back to loading script tags before the page is loaded\n      // https://caniuse.com/#feat=link-rel-preload\n\n\n      if (hasPreload) {\n        preloadScript(url);\n        return;\n      }\n\n      if (isDependency) {\n        // loadPage will automatically handle depencies, so no need to\n        // preload them manually\n        return;\n      }\n\n      if (document.readyState === 'complete') {\n        return _this2.loadPage(route).catch(() => {});\n      } else {\n        return new _promise.default(resolve => {\n          window.addEventListener('load', () => {\n            _this2.loadPage(route).then(() => resolve(), () => resolve());\n          });\n        });\n      }\n    })();\n  }\n\n}\n\nexports.default = PageLoader;","map":{"version":3,"sources":["C:\\Users\\hb970\\OneDrive\\바탕 화면\\hacker\\HJ\\node_modules\\next\\dist\\client\\page-loader.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_asyncToGenerator2","_promise","_mitt","supportsPreload","el","relList","supports","_unused","hasPreload","document","createElement","preloadScript","url","link","rel","crossOrigin","process","href","as","head","appendChild","PageLoader","constructor","buildId","assetPrefix","pageCache","pageRegisterEvents","loadingRoutes","promisedBuildId","resolve","env","__NEXT_GRANULAR_CHUNKS","promisedBuildManifest","window","__BUILD_MANIFEST","__BUILD_MANIFEST_CB","__NEXT_EXPERIMENTAL_SELECTIVEPAGEBUILDING","onDynamicBuildId","unfetch","then","res","ok","err","Error","text","trim","catch","console","warn","getDependencies","route","man","map","normalizeRoute","replace","loadPage","reject","fire","_ref","error","page","off","cachedPage","on","querySelector","deps","forEach","d","loadScript","loadRoute","_this","scriptRoute","encodeURIComponent","isPage","script","__NEXT_MODERN_BUILD","type","src","onerror","code","emit","body","registerPage","regFn","register","NODE_ENV","module","hot","status","log","check","removeStatusHandler","prefetch","isDependency","_this2","cn","navigator","connection","effectiveType","indexOf","saveData","readyState","addEventListener"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/asyncToGenerator\"));var _promise=_interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));var _mitt=_interopRequireDefault(require(\"next-server/dist/lib/mitt\"));/* global document, window */function supportsPreload(el){try{return el.relList.supports('preload');}catch(_unused){return false;}}const hasPreload=supportsPreload(document.createElement('link'));function preloadScript(url){const link=document.createElement('link');link.rel='preload';link.crossOrigin=process.crossOrigin;link.href=url;link.as='script';document.head.appendChild(link);}class PageLoader{constructor(buildId,assetPrefix){this.buildId=buildId;this.assetPrefix=assetPrefix;this.pageCache={};this.pageRegisterEvents=(0,_mitt.default)();this.loadingRoutes={};this.promisedBuildId=_promise.default.resolve();if(process.env.__NEXT_GRANULAR_CHUNKS){this.promisedBuildManifest=new _promise.default(resolve=>{if(window.__BUILD_MANIFEST){resolve(window.__BUILD_MANIFEST);}else{window.__BUILD_MANIFEST_CB=()=>{resolve(window.__BUILD_MANIFEST);};}});}if(process.env.__NEXT_EXPERIMENTAL_SELECTIVEPAGEBUILDING){this.promisedBuildId=_promise.default.resolve();this.onDynamicBuildId=()=>{this.promisedBuildId=new _promise.default(resolve=>{const unfetch=require('unfetch');unfetch(this.assetPrefix+\"/_next/static/HEAD_BUILD_ID\").then(res=>{if(res.ok){return res;}const err=new Error('Failed to fetch HEAD buildId');err.res=res;throw err;}).then(res=>res.text()).then(buildId=>{this.buildId=buildId.trim();}).catch(()=>{// When this fails it's not a _huge_ deal, preload wont work and page\n// navigation will 404, triggering a SSR refresh\nconsole.warn('Failed to load BUILD_ID from server. '+'The following client-side page transition will likely 404 and cause a SSR.\\n'+'http://err.sh/zeit/next.js/head-build-id');}).then(resolve,resolve);});};}}// Returns a promise for the dependencies for a particular route\ngetDependencies(route){return this.promisedBuildManifest.then(man=>man[route]&&man[route].map(url=>\"/_next/\"+url)||[]);}normalizeRoute(route){if(route[0]!=='/'){throw new Error(\"Route name should start with a \\\"/\\\", got \\\"\"+route+\"\\\"\");}route=route.replace(/\\/index$/,'/');if(route==='/')return route;return route.replace(/\\/$/,'');}loadPage(route){route=this.normalizeRoute(route);return new _promise.default((resolve,reject)=>{const fire=(_ref)=>{let{error,page}=_ref;this.pageRegisterEvents.off(route,fire);delete this.loadingRoutes[route];if(error){reject(error);}else{resolve(page);}};// If there's a cached version of the page, let's use it.\nconst cachedPage=this.pageCache[route];if(cachedPage){const{error,page}=cachedPage;error?reject(error):resolve(page);return;}// Register a listener to get the page\nthis.pageRegisterEvents.on(route,fire);// If the page is loading via SSR, we need to wait for it\n// rather downloading it again.\nif(document.querySelector(\"script[data-next-page=\\\"\"+route+\"\\\"]\")){return;}if(!this.loadingRoutes[route]){if(process.env.__NEXT_GRANULAR_CHUNKS){this.getDependencies(route).then(deps=>{deps.forEach(d=>{if(!document.querySelector(\"script[src^=\\\"\"+d+\"\\\"]\")){this.loadScript(d,route,false);}});this.loadRoute(route);this.loadingRoutes[route]=true;});}else{this.loadRoute(route);this.loadingRoutes[route]=true;}}});}loadRoute(route){var _this=this;return(0,_asyncToGenerator2.default)(function*(){if(process.env.__NEXT_EXPERIMENTAL_SELECTIVEPAGEBUILDING){yield _this.promisedBuildId;}route=_this.normalizeRoute(route);let scriptRoute=route==='/'?'/index.js':route+\".js\";const url=_this.assetPrefix+\"/_next/static/\"+encodeURIComponent(_this.buildId)+\"/pages\"+scriptRoute;_this.loadScript(url,route,true);})();}loadScript(url,route,isPage){const script=document.createElement('script');if(process.env.__NEXT_MODERN_BUILD&&'noModule'in script){script.type='module';// Only page bundle scripts need to have .module added to url,\n// dependencies already have it added during build manifest creation\nif(isPage)url=url.replace(/\\.js$/,'.module.js');}script.crossOrigin=process.crossOrigin;script.src=url;script.onerror=()=>{const error=new Error(\"Error loading script \"+url);error.code='PAGE_LOAD_ERROR';this.pageRegisterEvents.emit(route,{error});};document.body.appendChild(script);}// This method if called by the route code.\nregisterPage(route,regFn){const register=()=>{try{const{error,page}=regFn();this.pageCache[route]={error,page};this.pageRegisterEvents.emit(route,{error,page});}catch(error){this.pageCache[route]={error};this.pageRegisterEvents.emit(route,{error});}};if(process.env.NODE_ENV!=='production'){// Wait for webpack to become idle if it's not.\n// More info: https://github.com/zeit/next.js/pull/1511\nif(module.hot&&module.hot.status()!=='idle'){console.log(\"Waiting for webpack to become \\\"idle\\\" to initialize the page: \\\"\"+route+\"\\\"\");const check=status=>{if(status==='idle'){module.hot.removeStatusHandler(check);register();}};module.hot.status(check);return;}}register();}prefetch(route,isDependency){var _this2=this;return(0,_asyncToGenerator2.default)(function*(){if(process.env.__NEXT_EXPERIMENTAL_SELECTIVEPAGEBUILDING){yield _this2.promisedBuildId;}route=_this2.normalizeRoute(route);let scriptRoute=(route==='/'?'/index':route)+\".js\";if(process.env.__NEXT_MODERN_BUILD&&'noModule'in document.createElement('script')){scriptRoute=scriptRoute.replace(/\\.js$/,'.module.js');}const url=isDependency?route:_this2.assetPrefix+\"/_next/static/\"+encodeURIComponent(_this2.buildId)+\"/pages\"+scriptRoute;// n.b. If preload is not supported, we fall back to `loadPage` which has\n// its own deduping mechanism.\nif(document.querySelector(\"link[rel=\\\"preload\\\"][href^=\\\"\"+url+\"\\\"], script[data-next-page=\\\"\"+route+\"\\\"]\")){return;}// Inspired by quicklink, license: https://github.com/GoogleChromeLabs/quicklink/blob/master/LICENSE\nlet cn;if(cn=navigator.connection){// Don't prefetch if the user is on 2G or if Save-Data is enabled.\nif((cn.effectiveType||'').indexOf('2g')!==-1||cn.saveData){return;}}if(process.env.__NEXT_GRANULAR_CHUNKS&&!isDependency){;(yield _this2.getDependencies(route)).forEach(url=>{_this2.prefetch(url,true);});}// Feature detection is used to see if preload is supported\n// If not fall back to loading script tags before the page is loaded\n// https://caniuse.com/#feat=link-rel-preload\nif(hasPreload){preloadScript(url);return;}if(isDependency){// loadPage will automatically handle depencies, so no need to\n// preload them manually\nreturn;}if(document.readyState==='complete'){return _this2.loadPage(route).catch(()=>{});}else{return new _promise.default(resolve=>{window.addEventListener('load',()=>{_this2.loadPage(route).then(()=>resolve(),()=>resolve());});});}})();}}exports.default=PageLoader;"]},"metadata":{},"sourceType":"script"}